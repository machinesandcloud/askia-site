<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ title or site.name }} | Askia</title>
    <meta name="description" content="{{ description or site.brandLine }}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700&family=Manrope:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/assets/styles.css" />
  </head>
  <body>
    <div class="bg-layer"></div>
    <header class="site-header">
      <div class="container nav">
        <a class="brand" href="/" aria-label="Askia">
          <img src="/assets/logo-wordmark.png" alt="Askia" class="brand-wordmark" />
        </a>
        <nav class="nav-links">
          {% for item in site.nav %}
            <a href="{{ item.url }}">{{ item.label }}</a>
          {% endfor %}
        </nav>
        <a class="btn btn-ghost" href="{{ site.cta.link }}">{{ site.cta.label }}</a>
      </div>
    </header>

    <main>
      {{ content | safe }}
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <div class="brand">
          <img src="/assets/logo-wordmark.png" alt="Askia" class="brand-wordmark" />
        </div>
        <div class="footer-contact">
          <span>{{ site.contact.address }}</span>
          <span>{{ site.contact.phone }}</span>
          <span>{{ site.contact.email }}</span>
        </div>
        <p class="footer-note">{{ site.footer.note }}</p>
      </div>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const form = document.querySelector("[data-assessment]");
        if (!form) return;

        const button = form.querySelector("[data-assessment-submit]");
        const result = form.querySelector("[data-assessment-result]");
        const title = form.querySelector("[data-assessment-title]");
        const message = form.querySelector("[data-assessment-message]");
        const recommendation = form.querySelector("[data-assessment-recommendation]");
        const cta = form.querySelector("[data-assessment-cta]");

        const outcomes = {
          green: {
            title: "ðŸŸ¢ Market-Ready",
            message:
              "Your career fundamentals are strong. Youâ€™re not blocked by skill or clarity â€” your main lever is execution and timing.",
            recs: ["Stay consistent", "Reassess if momentum stalls", "Coaching optional, not required"],
            cta: "Want a second opinion on positioning? Book a one-time review."
          },
          yellow: {
            title: "ðŸŸ¡ Under-Positioned (High ROI Zone)",
            message:
              "Youâ€™re closer than you think â€” but your experience isnâ€™t translating cleanly to the market. This is a positioning problem, not a talent issue.",
            recs: ["Tighten role targeting", "Rewrite narrative around scope + impact", "Align resume and LinkedIn with senior signal"],
            cta: "This is where focused coaching delivers outsized results. Book a strategy call to pressure-test your path."
          },
          red: {
            title: "ðŸ”´ Misaligned / At Risk",
            message:
              "Your career isnâ€™t stalled â€” itâ€™s drifting. Continuing without clarity will quietly cost you time, confidence, and leverage.",
            recs: ["Reset role definition", "Clarify IC vs leadership trajectory", "Build a deliberate 6-month plan"],
            cta: "Structured coaching is designed for exactly this moment. Book a call to reset your direction with intention."
          }
        };

        const render = (bucket) => {
          result.hidden = false;
          result.classList.remove("green", "yellow", "red");
          result.classList.add(bucket);
          title.textContent = outcomes[bucket].title;
          message.textContent = outcomes[bucket].message;
          recommendation.innerHTML = outcomes[bucket].recs.map((item) => `<li>${item}</li>`).join("");
          cta.textContent = outcomes[bucket].cta;
        };

        button.addEventListener("click", () => {
          const fields = Array.from(form.querySelectorAll("input[type='radio']"));
          const names = Array.from(new Set(fields.map((field) => field.name)));
          const selections = names.map((name) => form.querySelector(`input[name='${name}']:checked`));

          if (selections.some((selection) => !selection)) {
            result.hidden = false;
            result.classList.remove("green", "yellow", "red");
            title.textContent = "Complete all questions to see your score";
            message.textContent = "Answer each question to generate your Career Readiness Indexâ„¢ result.";
            recommendation.innerHTML = "";
            cta.textContent = "Once all questions are complete, click Calculate My Score.";
            return;
          }

          const score = selections.reduce((sum, input) => sum + Number(input.value), 0);
          if (score >= 40) {
            render("green");
          } else if (score >= 28) {
            render("yellow");
          } else {
            render("red");
          }
        });
      });
    </script>
  </body>
</html>
