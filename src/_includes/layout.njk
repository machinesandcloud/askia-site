<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ title or site.name }} | Askia</title>
    <meta name="description" content="{{ description or site.brandLine }}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700&family=Manrope:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/assets/styles.css" />
  </head>
  <body>
    <div class="bg-layer"></div>
    <header class="site-header">
      <div class="container nav">
        <a class="brand" href="/" aria-label="Askia">
          <img src="/assets/logo-wordmark.png" alt="Askia" class="brand-wordmark" />
        </a>
        <nav class="nav-links">
          {% for item in site.nav %}
            <a href="{{ item.url }}">{{ item.label }}</a>
          {% endfor %}
        </nav>
        <a class="btn btn-ghost" href="{{ site.cta.link }}">{{ site.cta.label }}</a>
      </div>
    </header>

    <main>
      {{ content | safe }}
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <div class="brand">
          <img src="/assets/logo-wordmark.png" alt="Askia" class="brand-wordmark" />
        </div>
        <div class="footer-contact">
          <span>{{ site.contact.address }}</span>
          <span>{{ site.contact.phone }}</span>
          <span>{{ site.contact.email }}</span>
        </div>
        <p class="footer-note">{{ site.footer.note }}</p>
      </div>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const wrapper = document.querySelector("[data-assessment]");
        if (!wrapper) return;

        const stepEl = wrapper.querySelector("[data-assessment-step]");
        const totalEl = wrapper.querySelector("[data-assessment-total]");
        const barEl = wrapper.querySelector("[data-assessment-bar]");
        const sectionEl = wrapper.querySelector("[data-assessment-section]");
        const questionEl = wrapper.querySelector("[data-assessment-question]");
        const subEl = wrapper.querySelector("[data-assessment-sub]");
        const optionsEl = wrapper.querySelector("[data-assessment-options]");
        const noteEl = wrapper.querySelector("[data-assessment-note]");
        const prevBtn = wrapper.querySelector("[data-assessment-prev]");
        const nextBtn = wrapper.querySelector("[data-assessment-next]");
        const result = wrapper.querySelector("[data-assessment-result]");
        const title = wrapper.querySelector("[data-assessment-title]");
        const message = wrapper.querySelector("[data-assessment-message]");
        const recommendation = wrapper.querySelector("[data-assessment-recommendation]");
        const cta = wrapper.querySelector("[data-assessment-cta]");

        const questions = [
          {
            section: "Section 1 â€” Current Positioning (Foundation)",
            question: "Q1. Which best describes your current role?",
            sub: "(Choose one)",
            options: [
              { label: "Mid-level IC (Engineer, Analyst, Designer, etc.)", value: 1 },
              { label: "Senior IC", value: 2 },
              { label: "Tech Lead / Staff / Principal", value: 3 },
              { label: "Engineering Manager / Manager+", value: 4 },
              { label: "Director / Head+", value: 5 }
            ]
          },
          {
            section: "Section 1 â€” Current Positioning (Foundation)",
            question: "Q2. How long have you been at your current level?",
            options: [
              { label: "Less than 1 year", value: 4 },
              { label: "1â€“2 years", value: 3 },
              { label: "3â€“4 years", value: 2 },
              { label: "5+ years", value: 0 }
            ],
            note: "âš ï¸ Long time at the same level quietly lowers readiness."
          },
          {
            section: "Section 2 â€” Market Signal (The Truth Serum)",
            question: "Q3. In the last 90 days, how many interviews have you landed?",
            options: [
              { label: "0", value: 0 },
              { label: "1â€“2", value: 2 },
              { label: "3â€“5", value: 4 },
              { label: "6+", value: 5 }
            ]
          },
          {
            section: "Section 2 â€” Market Signal (The Truth Serum)",
            question: "Q4. When recruiters reach out, they usually contact you about:",
            options: [
              { label: "Roles below my level", value: 0 },
              { label: "Lateral roles", value: 2 },
              { label: "Exactly what I want", value: 4 },
              { label: "Roles above my current scope", value: 5 }
            ]
          },
          {
            section: "Section 2 â€” Market Signal (The Truth Serum)",
            question: "Q5. Which best describes your resume today?",
            options: [
              { label: "Task-based (â€œresponsible forâ€¦â€)", value: 0 },
              { label: "Mixed (some impact, some tasks)", value: 2 },
              { label: "Impact-driven (metrics, outcomes, scope)", value: 4 },
              { label: "Clearly signals seniority / leadership", value: 5 }
            ]
          },
          {
            section: "Section 3 â€” Strategy & Execution",
            question: "Q6. How clear are you on the exact role youâ€™re targeting next?",
            options: [
              { label: "Not clear at all", value: 0 },
              { label: "Somewhat clear", value: 2 },
              { label: "Very clear", value: 4 },
              { label: "Extremely clear â€” I could explain it in one sentence", value: 5 }
            ]
          },
          {
            section: "Section 3 â€” Strategy & Execution",
            question: "Q7. How are you currently approaching your job search?",
            options: [
              { label: "Passive / waiting for inbound", value: 0 },
              { label: "Applying occasionally", value: 2 },
              { label: "Applying strategically", value: 4 },
              { label: "Targeted networking + tailored positioning", value: 5 }
            ]
          },
          {
            section: "Section 3 â€” Strategy & Execution",
            question: "Q8. If you were interviewed tomorrow, could you clearly articulate:",
            options: [
              { label: "My responsibilities, mostly", value: 1 },
              { label: "My impact and contributions", value: 2 },
              { label: "My scope, ownership, and business impact", value: 4 },
              { label: "My leadership, trade-offs, and decision-making", value: 5 }
            ]
          },
          {
            section: "Section 4 â€” Friction & Risk (Subconscious Triggers)",
            question: "Q9. Whatâ€™s your biggest career frustration right now?",
            options: [
              { label: "â€œI know Iâ€™m capable of moreâ€", value: 2 },
              { label: "â€œI keep getting passed overâ€", value: 1 },
              { label: "â€œI donâ€™t know what role I should targetâ€", value: 0 },
              { label: "â€œIâ€™m paid well but feel boxed inâ€", value: 3 },
              { label: "â€œIâ€™m burned out and driftingâ€", value: 0 }
            ]
          },
          {
            section: "Section 4 â€” Friction & Risk (Subconscious Triggers)",
            question: "Q10. If nothing changes, where do you realistically see yourself in 12 months?",
            options: [
              { label: "Same role, same scope", value: 0 },
              { label: "Slight improvement, but unclear growth", value: 1 },
              { label: "Strong chance of a better role", value: 3 },
              { label: "Already preparing for a major step up", value: 5 }
            ]
          }
        ];

        const outcomes = {
          green: {
            title: "ðŸŸ¢ Market-Ready",
            message:
              "Your career fundamentals are strong. Youâ€™re not blocked by skill or clarity â€” your main lever is execution and timing.",
            recs: ["Stay consistent", "Reassess if momentum stalls", "Coaching optional, not required"],
            cta: "Want a second opinion on positioning? Book a one-time review."
          },
          yellow: {
            title: "ðŸŸ¡ Under-Positioned (High ROI Zone)",
            message:
              "Youâ€™re closer than you think â€” but your experience isnâ€™t translating cleanly to the market. This is a positioning problem, not a talent issue.",
            recs: ["Tighten role targeting", "Rewrite narrative around scope + impact", "Align resume and LinkedIn with senior signal"],
            cta: "This is where focused coaching delivers outsized results. Book a strategy call to pressure-test your path."
          },
          red: {
            title: "ðŸ”´ Misaligned / At Risk",
            message:
              "Your career isnâ€™t stalled â€” itâ€™s drifting. Continuing without clarity will quietly cost you time, confidence, and leverage.",
            recs: ["Reset role definition", "Clarify IC vs leadership trajectory", "Build a deliberate 6-month plan"],
            cta: "Structured coaching is designed for exactly this moment. Book a call to reset your direction with intention."
          }
        };

        let index = 0;
        const answers = new Array(questions.length).fill(null);

        totalEl.textContent = questions.length;

        const renderQuestion = () => {
          const current = questions[index];
          stepEl.textContent = String(index + 1);
          barEl.style.width = `${((index + 1) / questions.length) * 100}%`;
          sectionEl.textContent = current.section;
          questionEl.textContent = current.question;
          subEl.textContent = current.sub || "";
          noteEl.textContent = current.note || "";
          optionsEl.innerHTML = "";

          current.options.forEach((option, optionIndex) => {
            const id = `q${index}-o${optionIndex}`;
            const label = document.createElement("label");
            label.innerHTML = `<input type="radio" name="q${index}" value="${option.value}" ${answers[index] === option.value ? "checked" : ""}/> ${option.label}`;
            label.setAttribute("for", id);
            const input = label.querySelector("input");
            input.id = id;
            input.addEventListener("change", () => {
              answers[index] = Number(input.value);
              nextBtn.disabled = false;
            });
            optionsEl.appendChild(label);
          });

          prevBtn.disabled = index === 0;
          nextBtn.textContent = index === questions.length - 1 ? "See Results" : "Next";
          nextBtn.disabled = answers[index] === null;
          result.hidden = true;
        };

        const renderResult = (bucket) => {
          result.hidden = false;
          result.classList.remove("green", "yellow", "red");
          result.classList.add(bucket);
          title.textContent = outcomes[bucket].title;
          message.textContent = outcomes[bucket].message;
          recommendation.innerHTML = outcomes[bucket].recs.map((item) => `<li>${item}</li>`).join("");
          cta.textContent = outcomes[bucket].cta;
        };

        prevBtn.addEventListener("click", () => {
          if (index > 0) {
            index -= 1;
            renderQuestion();
          }
        });

        nextBtn.addEventListener("click", () => {
          if (answers[index] === null) return;
          if (index < questions.length - 1) {
            index += 1;
            renderQuestion();
            return;
          }

          const score = answers.reduce((sum, value) => sum + Number(value || 0), 0);
          if (score >= 40) {
            renderResult("green");
          } else if (score >= 28) {
            renderResult("yellow");
          } else {
            renderResult("red");
          }
        });

        renderQuestion();
      });
    </script>
  </body>
</html>
