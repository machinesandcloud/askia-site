<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% if metaTitle %}{{ metaTitle }}{% elseif title %}{{ title }} | Askia{% else %}{{ site.name }} | Askia{% endif %}</title>
    <meta name="description" content="{{ metaDescription or description or site.brandLine }}" />
    <link rel="canonical" href="{{ site.url }}{{ page.url }}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700&family=Manrope:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="icon" type="image/png" href="/assets/favicon.png" />
    <link rel="apple-touch-icon" href="/assets/favicon.png" />
    <link rel="stylesheet" href="/assets/styles.css" />
  </head>
  <body>
    <div class="bg-layer"></div>
    <header class="site-header">
      <div class="container nav">
        <a class="brand" href="/" aria-label="Askia">
          <img src="/assets/logo-wordmark.png" alt="Askia" class="brand-wordmark" />
        </a>
        <nav class="nav-links">
          {% for item in site.nav %}
            <a href="{{ item.url }}">{{ item.label }}</a>
          {% endfor %}
        </nav>
        <a class="btn btn-ghost" href="{{ site.cta.link }}">{{ site.cta.label }}</a>
      </div>
    </header>

    <main>
      {{ content | safe }}
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <div class="brand">
          <img src="/assets/logo-wordmark.png" alt="Askia" class="brand-wordmark" />
        </div>
        <div class="footer-contact">
          <span>{{ site.contact.address }}</span>
          <span>{{ site.contact.phone }}</span>
          <span>{{ site.contact.email }}</span>
        </div>
        <p class="footer-note">{{ site.footer.note }}</p>
      </div>
    </footer>

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "{{ site.name }}",
        "url": "{{ site.url }}",
        "logo": "{{ site.url }}/assets/logo-wordmark.png",
        "contactPoint": {
          "@type": "ContactPoint",
          "telephone": "{{ site.contact.phone }}",
          "contactType": "sales",
          "email": "{{ site.contact.email }}"
        }
      }
    </script>
    {% if schemaType == "Service" %}
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Service",
        "name": "{{ schemaName }}",
        "description": "{{ schemaDescription }}",
        "serviceType": "{{ schemaServiceType }}",
        "provider": {
          "@type": "Organization",
          "name": "{{ site.name }}",
          "url": "{{ site.url }}"
        },
        "areaServed": "United States",
        "url": "{{ site.url }}{{ page.url }}"
      }
    </script>
    {% endif %}
    {% if breadcrumbs %}
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
          {% for crumb in breadcrumbs %}
          {
            "@type": "ListItem",
            "position": {{ loop.index }},
            "name": "{{ crumb.name }}",
            "item": "{{ site.url }}{{ crumb.url }}"
          }{% if not loop.last %},{% endif %}
          {% endfor %}
        ]
      }
    </script>
    {% endif %}

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const serviceCarousel = document.querySelector("[data-service-carousel]");
        if (serviceCarousel) {
          const track = serviceCarousel.querySelector("[data-service-track]");
          const cards = Array.from(serviceCarousel.querySelectorAll(".carousel-card"));
          if (!track || !cards.length) return;
          const prev = document.querySelector("[data-carousel-prev]");
          const next = document.querySelector("[data-carousel-next]");
          const dotsWrapper = document.querySelector("[data-carousel-dots]");
          const cardsPerView = () => {
            const styles = getComputedStyle(serviceCarousel);
            return parseInt(styles.getPropertyValue("--carousel-cards"), 10) || 1;
          };
          const maxTranslate = () => Math.max(0, track.scrollWidth - serviceCarousel.clientWidth);
          const centerOnIndex = (index, instant = false) => {
            if (!cards[index]) return;
            cards.forEach((card) => card.classList.remove("is-active"));
            cards[index].classList.add("is-active");
            const card = cards[index];
            const offset = card.offsetLeft + card.offsetWidth / 2 - serviceCarousel.clientWidth / 2;
            const translate = Math.min(Math.max(0, offset), maxTranslate());
            if (instant) {
              const prevTransition = track.style.transition;
              track.style.transition = "none";
              track.style.transform = `translateX(${-translate}px)`;
              requestAnimationFrame(() => {
                track.style.transition = prevTransition;
              });
              return;
            }
            track.style.transform = `translateX(${-translate}px)`;
          };
          const centerIndexForPage = (page) => {
            const perView = cardsPerView();
            const start = page * perView;
            const end = Math.min(start + perView - 1, cards.length - 1);
            return Math.floor((start + end) / 2);
          };
          const totalPages = () => Math.max(1, Math.ceil(cards.length / cardsPerView()));
          const pageForIndex = (index) => Math.floor(index / cardsPerView());
          let dots = [];
          let currentPage = 0;
          const updateDots = () => {
            if (!dots.length) return;
            dots.forEach((dot) => dot.classList.remove("is-active"));
            if (dots[currentPage]) dots[currentPage].classList.add("is-active");
          };
          const goToPage = (page, instant = false) => {
            const pages = totalPages();
            currentPage = (page + pages) % pages;
            const centerIndex = centerIndexForPage(currentPage);
            centerOnIndex(centerIndex, instant);
            updateDots();
          };
          const buildDots = () => {
            if (!dotsWrapper) return;
            dotsWrapper.innerHTML = "";
            dots = Array.from({ length: totalPages() }, (_, page) => {
              const dot = document.createElement("button");
              const centerIndex = centerIndexForPage(page);
              const title = cards[centerIndex]?.querySelector("h3")?.textContent?.trim() || "service";
              dot.type = "button";
              dot.setAttribute("aria-label", `Go to ${title}`);
              dot.addEventListener("click", () => goToPage(page));
              dotsWrapper.appendChild(dot);
              return dot;
            });
            updateDots();
          };
          const scrollByPage = (dir) => goToPage(currentPage + dir);
          buildDots();
          let interval = setInterval(() => scrollByPage(1), 5200);
          serviceCarousel.addEventListener("mouseenter", () => clearInterval(interval));
          serviceCarousel.addEventListener("mouseleave", () => {
            interval = setInterval(() => scrollByPage(1), 5200);
          });
          if (prev) prev.addEventListener("click", () => scrollByPage(-1));
          if (next) next.addEventListener("click", () => scrollByPage(1));
          const featured = serviceCarousel.querySelector(".carousel-card.is-featured");
          if (featured) {
            const featuredIndex = cards.indexOf(featured);
            currentPage = pageForIndex(featuredIndex);
            centerOnIndex(featuredIndex, true);
            updateDots();
          } else {
            goToPage(0, true);
          }
          window.addEventListener("resize", () => {
            buildDots();
            const active = serviceCarousel.querySelector(".carousel-card.is-active");
            const activeIndex = active ? cards.indexOf(active) : 0;
            currentPage = pageForIndex(activeIndex);
            centerOnIndex(activeIndex, true);
            updateDots();
          });
        }
        const carousel = document.querySelector("[data-success-carousel]");
        if (carousel) {
          const slides = Array.from(carousel.querySelectorAll(".success-slide"));
          const dots = Array.from(carousel.querySelectorAll(".success-dots span"));
          let index = 0;
          const showSlide = (next) => {
            slides[index].classList.remove("is-active");
            dots[index].classList.remove("is-active");
            index = next;
            slides[index].classList.add("is-active");
            dots[index].classList.add("is-active");
          };
          const next = () => showSlide((index + 1) % slides.length);
          let timer = setInterval(next, 4200);
          carousel.addEventListener("mouseenter", () => clearInterval(timer));
          carousel.addEventListener("mouseleave", () => {
            timer = setInterval(next, 4200);
          });
          dots.forEach((dot, idx) => {
            dot.addEventListener("click", () => showSlide(idx));
          });
        }

        const nudgeToast = document.querySelector("[data-service-nudge]");
        if (nudgeToast) {
          const messages = [
            "Ava M. booked a Resume Rebuild.",
            "Marcus P. started Momentum Coaching.",
            "Priya K. reserved an Executive Advisory slot.",
            "Jamie L. upgraded to Resume + LinkedIn + Cover Letter.",
            "Noah D. scheduled Brand + Career Clarity.",
            "Lena S. just booked a strategy call.",
            "Arjun R. secured a resume refresh spot.",
            "Sophia T. started Interview Practice.",
            "Ethan G. began Momentum Coaching.",
            "Nia W. chose Executive Advisory.",
            "Chris H. upgraded to the Brand package.",
            "Fatima Z. booked Resume Rebuild.",
            "Daniel V. reserved Resume + LinkedIn + Cover Letter.",
            "Iris Q. kicked off Career Clarity.",
            "Omar B. locked in Momentum Coaching.",
            "Grace P. booked a strategy call.",
            "Kevin M. grabbed an Executive Advisory consult.",
            "Hannah J. joined the Brand + Clarity track.",
            "Ravi K. scheduled Interview Practice.",
            "Tanya R. booked Resume Rebuild.",
            "Maya L. upgraded to the Brand refresh.",
            "Seth Y. secured a Momentum Coaching spot.",
            "Daisy N. booked Executive Advisory.",
            "Julian C. joined Resume + LinkedIn + Cover Letter.",
            "Zara H. booked a clarity session.",
            "Leo F. grabbed an interview prep slot.",
            "Mila P. started Resume Rebuild.",
            "Theo S. reserved Executive Advisory.",
            "Kim J. picked Momentum Coaching.",
            "Andre A. booked the Brand package.",
            "Jules E. booked Resume + LinkedIn + Cover Letter.",
            "Renee F. locked in Career Clarity.",
            "Iman S. grabbed an interview prep slot.",
            "Victor H. upgraded to Executive Advisory.",
            "Nora P. started Momentum Coaching.",
            "Elijah W. booked a strategy call.",
            "Sofia L. reserved Resume Rebuild.",
            "Kai T. joined the Brand refresh.",
            "Maya Q. scheduled Interview Practice.",
            "Liam D. booked Executive Advisory.",
            "Tessa R. started Momentum Coaching.",
            "Ari V. secured Resume + LinkedIn + Cover Letter.",
            "Caleb M. booked a clarity session.",
            "Sana K. grabbed a negotiation prep slot."
          ];
          let index = 0;
          const textEl = nudgeToast.querySelector(".nudge-text");
          const labelEl = nudgeToast.querySelector(".nudge-label");
          const closeBtn = nudgeToast.querySelector(".nudge-close");
          if (!textEl || !labelEl || !closeBtn) return;
          const times = ["Just now", "2 min ago", "5 min ago", "8 min ago", "12 min ago"];
          let active = true;

          const showToast = () => {
            if (!active) return;
            textEl.textContent = messages[index % messages.length];
            labelEl.textContent = times[index % times.length];
            nudgeToast.classList.add("is-visible");
            index += 1;
            setTimeout(() => nudgeToast.classList.remove("is-visible"), 2400);
          };

          const cycle = () => {
            showToast();
            if (active) nudgeToast._timer = setTimeout(cycle, 3000 + Math.random() * 4000);
          };

          closeBtn.addEventListener("click", () => {
            active = false;
            nudgeToast.classList.remove("is-visible");
            clearTimeout(nudgeToast._timer);
          });

          setTimeout(cycle, 5000 + Math.random() * 4000);
        }

        const wrapper = document.querySelector("[data-assessment]");
        if (!wrapper) return;

        const stepEl = wrapper.querySelector("[data-assessment-step]");
        const totalEl = wrapper.querySelector("[data-assessment-total]");
        const barEl = wrapper.querySelector("[data-assessment-bar]");
        const sectionEl = wrapper.querySelector("[data-assessment-section]");
        const questionEl = wrapper.querySelector("[data-assessment-question]");
        const subEl = wrapper.querySelector("[data-assessment-sub]");
        const optionsEl = wrapper.querySelector("[data-assessment-options]");
        const noteEl = wrapper.querySelector("[data-assessment-note]");
        const panel = wrapper.querySelector(".assessment-panel");
        const prevBtn = wrapper.querySelector("[data-assessment-prev]");
        const nextBtn = wrapper.querySelector("[data-assessment-next]");
        const overlay = wrapper.querySelector("[data-assessment-overlay]");
        const result = wrapper.querySelector("[data-assessment-result]");
        const title = wrapper.querySelector("[data-assessment-title]");
        const message = wrapper.querySelector("[data-assessment-message]");
        const recommendation = wrapper.querySelector("[data-assessment-recommendation]");
        const cta = wrapper.querySelector("[data-assessment-cta]");
        const scoreEl = wrapper.querySelector("[data-assessment-score]");
        const bookBtn = wrapper.querySelector("[data-assessment-book]");

        const questions = [
          {
            section: "Section 1 â€” Current Positioning (Foundation)",
            question: "Q1. Which best describes your current role?",
            sub: "(Choose one)",
            options: [
              { label: "Mid-level IC (Engineer, Analyst, Designer, etc.)", value: 1 },
              { label: "Senior IC", value: 2 },
              { label: "Tech Lead / Staff / Principal", value: 3 },
              { label: "Engineering Manager / Manager+", value: 4 },
              { label: "Director / Head+", value: 5 }
            ]
          },
          {
            section: "Section 1 â€” Current Positioning (Foundation)",
            question: "Q2. How long have you been at your current level?",
            options: [
              { label: "Less than 1 year", value: 4 },
              { label: "1â€“2 years", value: 3 },
              { label: "3â€“4 years", value: 2 },
              { label: "5+ years", value: 0 }
            ],
            note: "âš ï¸ Long time at the same level quietly lowers readiness."
          },
          {
            section: "Section 2 â€” Market Signal (The Truth Serum)",
            question: "Q3. In the last 90 days, how many interviews have you landed?",
            options: [
              { label: "0", value: 0 },
              { label: "1â€“2", value: 2 },
              { label: "3â€“5", value: 4 },
              { label: "6+", value: 5 }
            ]
          },
          {
            section: "Section 2 â€” Market Signal (The Truth Serum)",
            question: "Q4. When recruiters reach out, they usually contact you about:",
            options: [
              { label: "Roles below my level", value: 0 },
              { label: "Lateral roles", value: 2 },
              { label: "Exactly what I want", value: 4 },
              { label: "Roles above my current scope", value: 5 }
            ]
          },
          {
            section: "Section 2 â€” Market Signal (The Truth Serum)",
            question: "Q5. Which best describes your resume today?",
            options: [
              { label: "Task-based (â€œresponsible forâ€¦â€)", value: 0 },
              { label: "Mixed (some impact, some tasks)", value: 2 },
              { label: "Impact-driven (metrics, outcomes, scope)", value: 4 },
              { label: "Clearly signals seniority / leadership", value: 5 }
            ]
          },
          {
            section: "Section 3 â€” Strategy & Execution",
            question: "Q6. How clear are you on the exact role youâ€™re targeting next?",
            options: [
              { label: "Not clear at all", value: 0 },
              { label: "Somewhat clear", value: 2 },
              { label: "Very clear", value: 4 },
              { label: "Extremely clear â€” I could explain it in one sentence", value: 5 }
            ]
          },
          {
            section: "Section 3 â€” Strategy & Execution",
            question: "Q7. How are you currently approaching your job search?",
            options: [
              { label: "Passive / waiting for inbound", value: 0 },
              { label: "Applying occasionally", value: 2 },
              { label: "Applying strategically", value: 4 },
              { label: "Targeted networking + tailored positioning", value: 5 }
            ]
          },
          {
            section: "Section 3 â€” Strategy & Execution",
            question: "Q8. If you were interviewed tomorrow, could you clearly articulate:",
            options: [
              { label: "My responsibilities, mostly", value: 1 },
              { label: "My impact and contributions", value: 2 },
              { label: "My scope, ownership, and business impact", value: 4 },
              { label: "My leadership, trade-offs, and decision-making", value: 5 }
            ]
          },
          {
            section: "Section 4 â€” Friction & Risk (Subconscious Triggers)",
            question: "Q9. Whatâ€™s your biggest career frustration right now?",
            options: [
              { label: "â€œI know Iâ€™m capable of moreâ€", value: 2 },
              { label: "â€œI keep getting passed overâ€", value: 1 },
              { label: "â€œI donâ€™t know what role I should targetâ€", value: 0 },
              { label: "â€œIâ€™m paid well but feel boxed inâ€", value: 3 },
              { label: "â€œIâ€™m burned out and driftingâ€", value: 0 }
            ]
          },
          {
            section: "Section 4 â€” Friction & Risk (Subconscious Triggers)",
            question: "Q10. If nothing changes, where do you realistically see yourself in 12 months?",
            options: [
              { label: "Same role, same scope", value: 0 },
              { label: "Slight improvement, but unclear growth", value: 1 },
              { label: "Strong chance of a better role", value: 3 },
              { label: "Already preparing for a major step up", value: 5 }
            ]
          }
        ];

        const outcomes = {
          green: {
            title: "ðŸŸ¢ Market-Ready",
            message:
              "Your career fundamentals are strong. Youâ€™re not blocked by skill or clarity â€” your main lever is execution and timing.",
            recs: ["Stay consistent", "Reassess if momentum stalls", "Coaching optional, not required"],
            cta: "Want a second opinion on positioning? Book a one-time review."
          },
          yellow: {
            title: "ðŸŸ¡ Under-Positioned (High ROI Zone)",
            message:
              "Youâ€™re closer than you think â€” but your experience isnâ€™t translating cleanly to the market. This is a positioning problem, not a talent issue.",
            recs: ["Tighten role targeting", "Rewrite narrative around scope + impact", "Align resume and LinkedIn with senior signal"],
            cta: "This is where focused coaching delivers outsized results. Book a strategy call to pressure-test your path."
          },
          red: {
            title: "ðŸ”´ Misaligned / At Risk",
            message:
              "Your career isnâ€™t stalled â€” itâ€™s drifting. Continuing without clarity will quietly cost you time, confidence, and leverage.",
            recs: ["Reset role definition", "Clarify IC vs leadership trajectory", "Build a deliberate 6-month plan"],
            cta: "Structured coaching is designed for exactly this moment. Book a call to reset your direction with intention."
          }
        };

        let index = 0;
        const answers = new Array(questions.length).fill(null);

        totalEl.textContent = questions.length;

        const renderQuestion = () => {
          panel.classList.remove("slide-in");
          panel.classList.remove("slide-out");
          void panel.offsetWidth;
          panel.classList.add("slide-in");
          const current = questions[index];
          stepEl.textContent = String(index + 1);
          barEl.style.width = `${((index + 1) / questions.length) * 100}%`;
          sectionEl.textContent = current.section;
          questionEl.textContent = current.question;
          subEl.textContent = current.sub || "";
          noteEl.textContent = current.note || "";
          optionsEl.innerHTML = "";

          current.options.forEach((option, optionIndex) => {
            const id = `q${index}-o${optionIndex}`;
            const label = document.createElement("label");
            label.innerHTML = `<input type="radio" name="q${index}" value="${option.value}" ${answers[index] === option.value ? "checked" : ""}/> ${option.label}`;
            label.setAttribute("for", id);
            const input = label.querySelector("input");
            input.id = id;
            input.addEventListener("change", () => {
              answers[index] = Number(input.value);
              nextBtn.disabled = false;
            });
            optionsEl.appendChild(label);
          });

          prevBtn.disabled = index === 0;
          nextBtn.textContent = index === questions.length - 1 ? "See Results" : "Next";
          nextBtn.disabled = answers[index] === null;
          resetResult();
        };

        const renderResult = (bucket, score) => {
          overlay.hidden = false;
          result.hidden = false;
          document.body.classList.add("assessment-focus");
          result.classList.remove("green", "yellow", "red");
          result.classList.add(bucket);
          scoreEl.textContent = `Career Readiness Score: ${score} / 48`;
          title.textContent = outcomes[bucket].title;
          message.textContent = outcomes[bucket].message;
          recommendation.innerHTML = outcomes[bucket].recs.map((item) => `<li>${item}</li>`).join("");
          cta.textContent = outcomes[bucket].cta;
          bookBtn.style.display = bucket === "green" ? "none" : "inline-flex";
        };

        prevBtn.addEventListener("click", () => {
          if (index > 0) {
            panel.classList.remove("slide-in");
            panel.classList.add("slide-out");
            index -= 1;
            setTimeout(renderQuestion, 120);
          }
        });

        nextBtn.addEventListener("click", () => {
          if (answers[index] === null) return;
          if (index < questions.length - 1) {
            panel.classList.remove("slide-in");
            panel.classList.add("slide-out");
            index += 1;
            setTimeout(renderQuestion, 120);
            return;
          }

          const score = answers.reduce((sum, value) => sum + Number(value || 0), 0);
          if (score >= 40) {
            renderResult("green", score);
          } else if (score >= 28) {
            renderResult("yellow", score);
          } else {
            renderResult("red", score);
          }
        });

        const resetResult = () => {
          overlay.hidden = true;
          result.hidden = true;
          document.body.classList.remove("assessment-focus");
          title.textContent = "";
          message.textContent = "";
          recommendation.innerHTML = "";
          cta.textContent = "";
          scoreEl.textContent = "";
          bookBtn.style.display = "none";
        };

        renderQuestion();
        resetResult();

        wrapper.querySelector("[data-assessment-close]").addEventListener("click", () => {
          resetResult();
        });
        overlay.addEventListener("click", (event) => {
          if (event.target === overlay) {
            resetResult();
          }
        });
      });
    </script>
  </body>
</html>
