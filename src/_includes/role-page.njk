{% macro roleIcon(key) %}
  {% if key == "swe" %}
  <svg viewBox="0 0 200 200" aria-hidden="true" focusable="false">
    <rect x="32" y="40" width="136" height="90" rx="20" />
    <rect x="54" y="66" width="92" height="10" rx="5" />
    <rect x="54" y="86" width="70" height="8" rx="4" />
    <rect x="54" y="104" width="58" height="8" rx="4" />
    <path d="M70 150l18-12 12 8 18-14" />
  </svg>
  {% elif key == "devops" %}
  <svg viewBox="0 0 200 200" aria-hidden="true" focusable="false">
    <circle cx="70" cy="96" r="28" />
    <circle cx="130" cy="96" r="28" />
    <path d="M98 96h4" />
    <rect x="54" y="56" width="32" height="12" rx="6" />
    <rect x="114" y="124" width="32" height="12" rx="6" />
  </svg>
  {% elif key == "data" %}
  <svg viewBox="0 0 200 200" aria-hidden="true" focusable="false">
    <ellipse cx="100" cy="52" rx="48" ry="18" />
    <path d="M52 52v72c0 10 22 18 48 18s48-8 48-18V52" />
    <path d="M52 88c0 10 22 18 48 18s48-8 48-18" />
    <path d="M52 120c0 10 22 18 48 18s48-8 48-18" />
  </svg>
  {% elif key == "pm" %}
  <svg viewBox="0 0 200 200" aria-hidden="true" focusable="false">
    <rect x="36" y="48" width="128" height="92" rx="20" />
    <path d="M58 78h84" />
    <path d="M58 98h64" />
    <circle cx="144" cy="114" r="10" />
    <path d="M68 148l24-18 18 12 22-20" />
  </svg>
  {% elif key == "design" %}
  <svg viewBox="0 0 200 200" aria-hidden="true" focusable="false">
    <rect x="40" y="44" width="120" height="112" rx="22" />
    <path d="M70 78h60" />
    <path d="M70 96h40" />
    <circle cx="124" cy="120" r="16" />
    <path d="M76 136h48" />
  </svg>
  {% elif key == "em" %}
  <svg viewBox="0 0 200 200" aria-hidden="true" focusable="false">
    <circle cx="70" cy="84" r="16" />
    <circle cx="130" cy="84" r="16" />
    <rect x="50" y="112" width="100" height="30" rx="15" />
    <path d="M100 52v18" />
  </svg>
  {% elif key == "security" %}
  <svg viewBox="0 0 200 200" aria-hidden="true" focusable="false">
    <path d="M100 40l56 22v40c0 34-24 58-56 70-32-12-56-36-56-70V62z" />
    <circle cx="100" cy="96" r="16" />
    <path d="M100 96v26" />
  </svg>
  {% elif key == "ai" %}
  <svg viewBox="0 0 200 200" aria-hidden="true" focusable="false">
    <rect x="52" y="56" width="96" height="88" rx="20" />
    <circle cx="78" cy="92" r="10" />
    <circle cx="122" cy="92" r="10" />
    <path d="M84 120h32" />
    <path d="M100 56v-16" />
  </svg>
  {% elif key == "qa" %}
  <svg viewBox="0 0 200 200" aria-hidden="true" focusable="false">
    <rect x="36" y="48" width="128" height="92" rx="20" />
    <path d="M64 84l14 14 30-30" />
    <path d="M64 114h72" />
  </svg>
  {% elif key == "tp" %}
  <svg viewBox="0 0 200 200" aria-hidden="true" focusable="false">
    <circle cx="62" cy="88" r="16" />
    <circle cx="138" cy="88" r="16" />
    <path d="M78 88h44" />
    <rect x="54" y="116" width="92" height="20" rx="10" />
  </svg>
  {% elif key == "cs" %}
  <svg viewBox="0 0 200 200" aria-hidden="true" focusable="false">
    <rect x="40" y="54" width="120" height="72" rx="18" />
    <path d="M70 86h60" />
    <path d="M82 126l18 18 18-18" />
  </svg>
  {% elif key == "se" %}
  <svg viewBox="0 0 200 200" aria-hidden="true" focusable="false">
    <rect x="36" y="56" width="128" height="80" rx="20" />
    <path d="M70 86h60" />
    <path d="M70 106h44" />
    <circle cx="144" cy="112" r="8" />
  </svg>
  {% elif key == "sa" %}
  <svg viewBox="0 0 200 200" aria-hidden="true" focusable="false">
    <path d="M48 140l40-54 28 34 36-44" />
    <circle cx="88" cy="86" r="10" />
    <circle cx="116" cy="120" r="10" />
    <circle cx="152" cy="76" r="10" />
  </svg>
  {% elif key == "pops" %}
  <svg viewBox="0 0 200 200" aria-hidden="true" focusable="false">
    <rect x="40" y="52" width="120" height="84" rx="20" />
    <path d="M70 84h60" />
    <path d="M70 104h44" />
    <path d="M70 124h34" />
  </svg>
  {% else %}
  <svg viewBox="0 0 200 200" aria-hidden="true" focusable="false">
    <circle cx="100" cy="100" r="56" />
    <path d="M72 100h56" />
    <path d="M100 72v56" />
  </svg>
  {% endif %}
{% endmacro %}

{% set roleKey = "default" %}
{% if "Software Engineer" in page.h1 %}{% set roleKey = "swe" %}
{% elif "DevOps" in page.h1 %}{% set roleKey = "devops" %}
{% elif "Data" in page.h1 %}{% set roleKey = "data" %}
{% elif "Product Manager" in page.h1 %}{% set roleKey = "pm" %}
{% elif "Product Design" in page.h1 %}{% set roleKey = "design" %}
{% elif "Engineering Manager" in page.h1 %}{% set roleKey = "em" %}
{% elif "Cybersecurity" in page.h1 %}{% set roleKey = "security" %}
{% elif "AI" in page.h1 or "ML" in page.h1 %}{% set roleKey = "ai" %}
{% elif "QA" in page.h1 %}{% set roleKey = "qa" %}
{% elif "Technical Program Manager" in page.h1 %}{% set roleKey = "tp" %}
{% elif "Customer Success" in page.h1 %}{% set roleKey = "cs" %}
{% elif "Sales Engineer" in page.h1 %}{% set roleKey = "se" %}
{% elif "Solutions Architect" in page.h1 %}{% set roleKey = "sa" %}
{% elif "Product Ops" in page.h1 %}{% set roleKey = "pops" %}
{% endif %}

<section class="role-hero role-theme-{{ roleKey }}" style="--role-accent: {{ page.visual.accent }}; --role-accent-2: {{ page.visual.accent2 }};">
  <div class="container role-hero-grid">
    <div class="role-hero-copy">
      {% if page.eyebrow %}<p class="hero-eyebrow">{{ page.eyebrow }}</p>{% endif %}
      <h1 class="role-hero-title">{{ page.h1 }}</h1>
      {% if page.subtitle %}<p class="role-hero-subtitle">{{ page.subtitle }}</p>{% endif %}
      {% if page.supporting %}<p class="role-hero-supporting">{{ page.supporting }}</p>{% endif %}
      {% if page.highlights and page.highlights.length %}
      <div class="role-hero-chips">
        {% for item in page.highlights %}
          <span>{{ item }}</span>
        {% endfor %}
      </div>
      {% endif %}
      <div class="role-hero-cta">
        <a class="btn btn-primary" href="{{ page.ctaLink or site.cta.link }}">{{ page.ctaLabel or site.cta.label }}</a>
        {% if page.secondaryCtaLabel %}
          <a class="btn btn-ghost" href="{{ page.secondaryCtaLink }}">{{ page.secondaryCtaLabel }}</a>
        {% endif %}
      </div>
      {% if page.ctaProof %}<span class="hero-proof">{{ page.ctaProof }}</span>{% endif %}
    </div>
    <div class="role-hero-canvas">
      <div class="role-hero-graphic">
        {{ roleIcon(roleKey) }}
        <span>{{ page.heroLabel or "Role track" }}</span>
      </div>
      {% if page.heroCard %}
      <div class="role-hero-card">
        <strong>{{ page.heroCard.title }}</strong>
        {% if page.heroCard.body %}<p>{{ page.heroCard.body }}</p>{% endif %}
        {% if page.heroCard.bullets and page.heroCard.bullets.length %}
          <ul>
            {% for item in page.heroCard.bullets %}
              <li>{{ item }}</li>
            {% endfor %}
          </ul>
        {% endif %}
      </div>
      {% endif %}
      {% if page.proof and page.proof.items %}
      <div class="role-hero-stats">
        {% for item in page.proof.items %}
          <div class="role-hero-stat">
            <strong>{{ item.title }}</strong>
            <span>{{ item.body }}</span>
          </div>
        {% endfor %}
      </div>
      {% endif %}
    </div>
  </div>
</section>

<section class="section role-signal">
  <div class="container">
    <div class="pillar-header">
      <p class="hero-eyebrow">Role signal</p>
      <h2 class="section-title section-title-glow">{{ page.focus.title }}</h2>
      {% if page.focus.subtitle %}<p class="section-subtitle">{{ page.focus.subtitle }}</p>{% endif %}
    </div>
    <div class="role-signal-grid">
      {% for item in page.focus.items %}
        <article class="role-signal-card">
          <div class="role-signal-icon">{{ roleIcon(roleKey) }}</div>
          <div>
            <span>{{ item.tag }}</span>
            <h3>{{ item.title }}</h3>
            <p>{{ item.body }}</p>
          </div>
        </article>
      {% endfor %}
    </div>
  </div>
</section>

<section class="section section-soft">
  <div class="container">
    <div class="outcome-header">
      <h2 class="section-title section-title-accent section-title-glow">{{ page.proof.title }}</h2>
      {% if page.proof.subtitle %}<p class="section-subtitle">{{ page.proof.subtitle }}</p>{% endif %}
    </div>
    <div class="outcome-grid">
      {% for item in page.proof.items %}
        <div class="outcome-card">
          <span class="outcome-number">{{ item.title }}</span>
          <p>{{ item.body }}</p>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

<section class="section">
  <div class="container role-journey">
    <div>
      <h2 class="section-title section-title-glow">{{ page.steps.title }}</h2>
      {% if page.steps.subtitle %}<p class="section-subtitle">{{ page.steps.subtitle }}</p>{% endif %}
    </div>
    <div class="role-journey-steps">
      {% for step in page.steps.items %}
        <div class="journey-step">
          <span>0{{ loop.index }}</span>
          <h4>{{ step.title }}</h4>
          <p>{{ step.body }}</p>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

<section class="section">
  <div class="container">
    <div class="pillar-header">
      <p class="hero-eyebrow">Deliverables</p>
      <h2 class="section-title section-title-glow">{{ page.deliverables.title }}</h2>
      {% if page.deliverables.subtitle %}<p class="section-subtitle">{{ page.deliverables.subtitle }}</p>{% endif %}
    </div>
    <div class="service-stack">
      {% for item in page.deliverables.items %}
        <div class="service-tile">
          <div class="service-header">
            <h3>{{ item.title }}</h3>
            {% if item.tag %}<span class="service-tag">{{ item.tag }}</span>{% endif %}
          </div>
          <p>{{ item.body }}</p>
          {% if item.bullets and item.bullets.length %}
          <ul>
            {% for bullet in item.bullets %}
              <li>{{ bullet }}</li>
            {% endfor %}
          </ul>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>
</section>

<section class="section">
  <div class="container services-preview">
    <div class="card card-soft">
      <strong>{{ page.for.title }}</strong>
      <p>{{ page.for.body }}</p>
      {% if page.for.items and page.for.items.length %}
      <ul class="highlight-list">
        {% for item in page.for.items %}
          <li>{{ item }}</li>
        {% endfor %}
      </ul>
      {% endif %}
    </div>
    <div class="card">
      <strong>{{ page.notFor.title }}</strong>
      <p>{{ page.notFor.body }}</p>
      {% if page.notFor.items and page.notFor.items.length %}
      <ul class="highlight-list">
        {% for item in page.notFor.items %}
          <li>{{ item }}</li>
        {% endfor %}
      </ul>
      {% endif %}
    </div>
  </div>
</section>

<section class="section">
  <div class="container card">
    <h2 class="section-title">{{ page.related.title }}</h2>
    <p class="section-subtitle">{{ page.related.body }}</p>
    <div class="hero-cta">
      <a class="btn btn-primary" href="{{ page.related.primaryLink }}">{{ page.related.primaryLabel }}</a>
      <a class="btn btn-ghost" href="{{ page.related.secondaryLink }}">{{ page.related.secondaryLabel }}</a>
    </div>
  </div>
</section>

<section class="section">
  <div class="container faq-stage">
    <div class="faq-header">
      <h2 class="section-title section-title-glow">{{ page.faq.title }}</h2>
      {% if page.faq.subtitle %}<p class="section-subtitle">{{ page.faq.subtitle }}</p>{% endif %}
    </div>
    <div class="faq-grid">
      {% for item in page.faq.items %}
        <details class="faq-card">
          <summary>{{ item.question }}</summary>
          <p>{{ item.answer }}</p>
        </details>
      {% endfor %}
    </div>
  </div>
</section>

<section class="section">
  <div class="container cta-band">
    <div>
      <h2 class="section-title">{{ page.cta.title }}</h2>
      <p class="section-subtitle">{{ page.cta.body }}</p>
    </div>
    <a class="btn btn-primary" href="{{ page.cta.link or site.cta.link }}">{{ page.cta.label or site.cta.label }}</a>
  </div>
</section>
